# FPGA_Clock

## 一、设计目标
1.  能进行正常的时、分、秒计时功能，分别由6个数码管显示24小时、60分、60秒。
2.  按下开发板上的某个按键时，计时器迅速递增，并按24小时循环，计到23小时后，再回到00。
3.  按下开发板上的某个按键时，计分器迅速递增，并按60分循环，计到59分后再回到00。
4.  利用开发板上的扬声器可以实现整点报时功能，当计时到达59分50秒时开始报时，在59分50秒、52秒、54秒、56秒、58秒时鸣叫，鸣叫声频率为500HZ，整点报时频率可定义为1KHZ。

## 二、开发工具
- **软件**：Quartus II 13.0
- **语言**：VHDL
- **开发板**：ALTERA 公司的 Cyclone IV 系列 FPGA，型号为 EP4CE6F17C8

## 三、设计思路
流程：编写代码、存盘、编译、功能仿真、引脚配置、再编译、下载

整个系统可分为 5 个核心模块，各模块功能独立且通过信号交互协同工作
```mermaid
flowchart LR
    A[系统时钟] --> B[分频模块]
    B --> C[计时模块]
    D[按键消抖模块] --> C
    B --> E[蜂鸣器控制模块]
    C --> F[数码管显示模块]
1. 时钟分频模块
系统自带 50MHz 时钟，需分频得到多种低频时钟信号，为其他模块提供基准。
1Hz 时钟：用于秒计数（50MHz 分频为 1Hz，即每 50,000,000 个时钟周期产生一个脉冲）。
数码管扫描时钟：约 1kHz（每个数码管刷新周期 1ms，6 个数码管扫描频率≈166Hz，避免视觉闪烁）。
蜂鸣器频率时钟：500Hz（周期 2ms，每 1ms 翻转一次电平）和 1kHz（周期 1ms，每 0.5ms 翻转一次电平），用于产生对应频率的鸣叫声。
2. 计时模块
实现时、分、秒的计数逻辑，支持正常计时和按键快速递增：
正常计时：由 1Hz 时钟驱动，秒（0-59）满 60 向分进位，分（0-59）满 60 向时进位，时（0-23）满 24 清零。
快速递增：接收按键消抖后的信号，当 “时递增” 按键按下时，时计数器切换为高频时钟快速累加；“分递增” 按键按下时，分计数器同理快速累加。
3. 按键消抖模块
机械按键存在抖动，需通过消抖确保信号可靠。原理：检测到按键状态变化后，延时 20ms 再采样，若状态稳定则输出有效信号。
4. 数码管显示模块
通过 6 个数码管动态扫描显示时（2 位）、分（2 位）、秒（2 位）：
段码转换：将 0-9 的数字转换为数码管段码（共阴极 / 共阳极，如 0 对应 0x3f）。
动态扫描：用位选信号（sel [5:0]）轮流选通 6 个数码管，段选信号（seg [6:0]）输出对应数字的段码，利用人眼视觉暂留实现 “同时显示”。
5. 蜂鸣器控制模块
当时间为 “59 分 50 秒”“59 分 52 秒”“59 分 54 秒”“59 分 56 秒”“59 分 58 秒” 时，输出 500Hz 方波；当时间为 “xx 时 00 分 00 秒”（整点）时，输出 1kHz 方波。其他时刻，蜂鸣器关闭。
